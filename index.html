<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AI News Summarizer</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 20px;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            background: white;
            border-radius: 20px;
            box-shadow: 0 20px 40px rgba(0,0,0,0.1);
            overflow: hidden;
        }

        .header {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 30px;
            text-align: center;
        }

        .header h1 {
            font-size: 2.5rem;
            margin-bottom: 10px;
            font-weight: 700;
        }

        .header p {
            opacity: 0.9;
            font-size: 1.1rem;
        }

        .main-content {
            padding: 40px;
        }

        .section {
            margin-bottom: 40px;
            padding: 30px;
            border-radius: 15px;
            background: #f8f9fa;
            border: 1px solid #e9ecef;
        }

        .section h2 {
            color: #495057;
            margin-bottom: 20px;
            font-size: 1.5rem;
            font-weight: 600;
        }

        .input-group {
            display: flex;
            gap: 15px;
            margin-bottom: 20px;
            align-items: center;
        }

        .input-group input {
            flex: 1;
            padding: 15px 20px;
            border: 2px solid #e9ecef;
            border-radius: 10px;
            font-size: 1rem;
            transition: border-color 0.3s ease;
        }

        .input-group input:focus {
            outline: none;
            border-color: #667eea;
        }

        .btn {
            padding: 15px 30px;
            border: none;
            border-radius: 10px;
            font-size: 1rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }

        .btn-primary {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
        }

        .btn-primary:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 20px rgba(102, 126, 234, 0.3);
        }

        .btn-secondary {
            background: #6c757d;
            color: white;
        }

        .btn-success {
            background: #28a745;
            color: white;
        }

        .btn-warning {
            background: #ffc107;
            color: #212529;
        }

        .btn:disabled {
            opacity: 0.6;
            cursor: not-allowed;
            transform: none;
        }

        .loading {
            display: none;
            text-align: center;
            padding: 20px;
        }

        .spinner {
            border: 4px solid #f3f3f3;
            border-top: 4px solid #667eea;
            border-radius: 50%;
            width: 40px;
            height: 40px;
            animation: spin 1s linear infinite;
            margin: 0 auto 10px;
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        .news-item {
            background: white;
            border-radius: 10px;
            padding: 20px;
            margin-bottom: 15px;
            border: 1px solid #e9ecef;
            transition: all 0.3s ease;
        }

        .news-item:hover {
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
            transform: translateY(-2px);
        }

        .news-item.selected {
            border-color: #667eea;
            background: #f8f9ff;
        }

        .news-checkbox {
            margin-right: 15px;
            transform: scale(1.2);
        }

        .news-title {
            font-size: 1.2rem;
            font-weight: 600;
            color: #495057;
            margin-bottom: 10px;
        }

        .news-description {
            color: #6c757d;
            line-height: 1.6;
            margin-bottom: 10px;
        }

        .news-meta {
            display: flex;
            justify-content: space-between;
            align-items: center;
            font-size: 0.9rem;
            color: #6c757d;
        }

        .summary-item {
            background: white;
            border-radius: 10px;
            padding: 25px;
            margin-bottom: 20px;
            border-left: 4px solid #28a745;
            box-shadow: 0 2px 10px rgba(0,0,0,0.05);
        }

        .summary-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 15px;
        }

        .summary-title {
            font-size: 1.3rem;
            font-weight: 600;
            color: #495057;
        }

        .summary-content {
            color: #6c757d;
            line-height: 1.7;
            margin-bottom: 15px;
        }

        .summary-meta {
            font-size: 0.9rem;
            color: #6c757d;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .feed-controls {
            display: flex;
            gap: 15px;
            margin-bottom: 20px;
            flex-wrap: wrap;
        }

        .search-box {
            flex: 1;
            min-width: 200px;
        }

        .hidden {
            display: none;
        }

        .error {
            background: #f8d7da;
            color: #721c24;
            padding: 15px;
            border-radius: 10px;
            margin: 15px 0;
            border: 1px solid #f5c6cb;
        }

        .success {
            background: #d4edda;
            color: #155724;
            padding: 15px;
            border-radius: 10px;
            margin: 15px 0;
            border: 1px solid #c3e6cb;
        }

        @media (max-width: 768px) {
            .container {
                margin: 10px;
                border-radius: 15px;
            }
            
            .main-content {
                padding: 20px;
            }
            
            .input-group {
                flex-direction: column;
            }
            
            .feed-controls {
                flex-direction: column;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>ü§ñ AI News Summarizer</h1>
            <p>Search news, generate summaries, and export to Slack</p>
        </div>

        <div class="main-content">
            <!-- Search Section -->
            <div class="section">
                <h2>üîç Search News</h2>
                <div class="input-group">
                    <input type="text" id="clientInput" placeholder="Enter Braze TAM client name..." />
                    <button class="btn btn-primary" onclick="searchNews()">Search News</button>
                </div>
                <div class="loading" id="searchLoading">
                    <div class="spinner"></div>
                    <p>Searching for news...</p>
                </div>
                <div id="searchError" class="error hidden"></div>
            </div>

            <!-- News Results Section -->
            <div class="section" id="newsSection" style="display: none;">
                <h2>üì∞ News Results</h2>
                <div style="display: flex; gap: 15px; margin-bottom: 20px; align-items: center;">
                    <button class="btn btn-secondary" onclick="selectAllNews()">Select All</button>
                    <button class="btn btn-secondary" onclick="deselectAllNews()">Deselect All</button>
                    <button class="btn btn-success" onclick="generateSummaries()" id="summarizeBtn" disabled>
                        Generate Summaries (<span id="selectedCount">0</span>)
                    </button>
                </div>
                <div id="newsResults"></div>
                <div class="loading" id="summaryLoading">
                    <div class="spinner"></div>
                    <p>Generating summaries...</p>
                </div>
            </div>

            <!-- Summary Results Section -->
            <div class="section" id="summarySection" style="display: none;">
                <h2>üìù Generated Summaries</h2>
                <div class="feed-controls">
                    <input type="text" class="search-box" id="summarySearch" placeholder="Search summaries..." onkeyup="filterSummaries()" />
                    <button class="btn btn-warning" onclick="exportAllSummaries()">Export All to Slack</button>
                </div>
                <div id="summaryResults"></div>
            </div>

            <!-- Feed View Section -->
            <div class="section" id="feedSection" style="display: none;">
                <h2>üìã Summary Feed</h2>
                <div class="feed-controls">
                    <input type="text" class="search-box" id="feedSearch" placeholder="Search feed..." onkeyup="filterFeed()" />
                    <button class="btn btn-warning" onclick="exportAllSummaries()">Export All to Slack</button>
                </div>
                <div id="feedResults"></div>
            </div>
        </div>
    </div>

    <script>
        // Global state
        let currentNews = [];
        let currentSummaries = [];
        let allSummaries = [];

        // Configuration - Replace with your actual API endpoints and keys
        const CONFIG = {
            NEWS_API_KEY: 'YOUR_NEWS_API_KEY', // Replace with actual News API key
            NEWS_API_URL: 'https://newsapi.org/v2/everything',
            SUMMARY_API_URL: 'YOUR_SUMMARY_API_ENDPOINT', // Replace with actual Summary API endpoint
            SLACK_WEBHOOK_URL: 'YOUR_SLACK_WEBHOOK_URL' // Replace with actual Slack webhook URL
        };

        // Search for news articles
        async function searchNews() {
            const clientName = document.getElementById('clientInput').value.trim();
            if (!clientName) {
                showError('searchError', 'Please enter a client name');
                return;
            }

            showLoading('searchLoading');
            hideError('searchError');

            try {
                // Simulate API call - replace with actual News API integration
                const response = await mockNewsSearch(clientName);
                currentNews = response.articles;
                displayNewsResults();
                showSection('newsSection');
            } catch (error) {
                showError('searchError', 'Failed to search news: ' + error.message);
            } finally {
                hideLoading('searchLoading');
            }
        }

        // Mock news search function - replace with actual API call
        async function mockNewsSearch(query) {
            // Simulate API delay
            await new Promise(resolve => setTimeout(resolve, 1500));
            
            return {
                articles: [
                    {
                        title: `${query} announces new AI-powered customer engagement platform`,
                        description: `The company revealed its latest innovation in customer engagement technology, promising to revolutionize how businesses interact with their customers.`,
                        url: 'https://example.com/news1',
                        publishedAt: '2024-01-15T10:30:00Z',
                        source: { name: 'TechCrunch' }
                    },
                    {
                        title: `${query} reports record quarterly growth in Q4 2023`,
                        description: `Strong performance across all business segments drives exceptional growth, with particular strength in enterprise solutions.`,
                        url: 'https://example.com/news2',
                        publishedAt: '2024-01-14T15:45:00Z',
                        source: { name: 'Business Wire' }
                    },
                    {
                        title: `${query} partners with leading cloud providers for enhanced scalability`,
                        description: `Strategic partnerships announced to provide customers with improved performance and global reach.`,
                        url: 'https://example.com/news3',
                        publishedAt: '2024-01-13T09:15:00Z',
                        source: { name: 'PR Newswire' }
                    }
                ]
            };
        }

        // Display news results
        function displayNewsResults() {
            const container = document.getElementById('newsResults');
            container.innerHTML = '';

            currentNews.forEach((article, index) => {
                const articleDiv = document.createElement('div');
                articleDiv.className = 'news-item';
                articleDiv.innerHTML = `
                    <label style="display: flex; align-items: flex-start; cursor: pointer;">
                        <input type="checkbox" class="news-checkbox" onchange="updateSelectedCount()" data-index="${index}">
                        <div style="flex: 1;">
                            <div class="news-title">${article.title}</div>
                            <div class="news-description">${article.description}</div>
                            <div class="news-meta">
                                <span>${article.source.name}</span>
                                <span>${new Date(article.publishedAt).toLocaleDateString()}</span>
                            </div>
                        </div>
                    </label>
                `;
                container.appendChild(articleDiv);
            });
        }

        // Update selected count
        function updateSelectedCount() {
            const checkboxes = document.querySelectorAll('.news-checkbox:checked');
            const count = checkboxes.length;
            document.getElementById('selectedCount').textContent = count;
            document.getElementById('summarizeBtn').disabled = count === 0;
        }

        // Select all news items
        function selectAllNews() {
            document.querySelectorAll('.news-checkbox').forEach(checkbox => {
                checkbox.checked = true;
            });
            updateSelectedCount();
        }

        // Deselect all news items
        function deselectAllNews() {
            document.querySelectorAll('.news-checkbox').forEach(checkbox => {
                checkbox.checked = false;
            });
            updateSelectedCount();
        }

        // Generate summaries for selected articles
        async function generateSummaries() {
            const selectedCheckboxes = document.querySelectorAll('.news-checkbox:checked');
            const selectedArticles = Array.from(selectedCheckboxes).map(cb => 
                currentNews[parseInt(cb.dataset.index)]
            );

            if (selectedArticles.length === 0) {
                showError('searchError', 'Please select at least one article');
                return;
            }

            showLoading('summaryLoading');

            try {
                // Simulate API call - replace with actual Summary API integration
                const summaries = await mockSummaryGeneration(selectedArticles);
                currentSummaries = summaries;
                allSummaries = [...allSummaries, ...summaries];
                
                displaySummaryResults();
                updateFeed();
                showSection('summarySection');
                showSection('feedSection');
            } catch (error) {
                showError('searchError', 'Failed to generate summaries: ' + error.message);
            } finally {
                hideLoading('summaryLoading');
            }
        }

        // Mock summary generation - replace with actual API call
        async function mockSummaryGeneration(articles) {
            // Simulate API delay
            await new Promise(resolve => setTimeout(resolve, 2000));
            
            return articles.map((article, index) => ({
                id: Date.now() + index,
                originalTitle: article.title,
                summary: `This article discusses ${article.title.toLowerCase()}. Key insights include significant developments in the industry, with particular focus on innovation and growth strategies. The content highlights important trends and future outlook for the sector.`,
                originalUrl: article.url,
                source: article.source.name,
                publishedAt: article.publishedAt,
                generatedAt: new Date().toISOString()
            }));
        }

        // Display summary results
        function displaySummaryResults() {
            const container = document.getElementById('summaryResults');
            container.innerHTML = '';

            currentSummaries.forEach(summary => {
                const summaryDiv = document.createElement('div');
                summaryDiv.className = 'summary-item';
                summaryDiv.innerHTML = `
                    <div class="summary-header">
                        <div class="summary-title">${summary.originalTitle}</div>
                        <button class="btn btn-warning" onclick="exportSummary(${summary.id})">Export to Slack</button>
                    </div>
                    <div class="summary-content">${summary.summary}</div>
                    <div class="summary-meta">
                        <span>Source: ${summary.source} | Generated: ${new Date(summary.generatedAt).toLocaleString()}</span>
                        <a href="${summary.originalUrl}" target="_blank" style="color: #667eea;">Read Original</a>
                    </div>
                `;
                container.appendChild(summaryDiv);
            });
        }

        // Update feed view
        function updateFeed() {
            const container = document.getElementById('feedResults');
            container.innerHTML = '';

            allSummaries.forEach(summary => {
                const summaryDiv = document.createElement('div');
                summaryDiv.className = 'summary-item';
                summaryDiv.innerHTML = `
                    <div class="summary-header">
                        <div class="summary-title">${summary.originalTitle}</div>
                        <button class="btn btn-warning" onclick="exportSummary(${summary.id})">Export to Slack</button>
                    </div>
                    <div class="summary-content">${summary.summary}</div>
                    <div class="summary-meta">
                        <span>Source: ${summary.source} | Generated: ${new Date(summary.generatedAt).toLocaleString()}</span>
                        <a href="${summary.originalUrl}" target="_blank" style="color: #667eea;">Read Original</a>
                    </div>
                `;
                container.appendChild(summaryDiv);
            });
        }

        // Export individual summary to Slack
        async function exportSummary(summaryId) {
            const summary = allSummaries.find(s => s.id === summaryId);
            if (!summary) return;

            try {
                // Simulate Slack export - replace with actual webhook call
                await mockSlackExport(summary);
                showSuccess(`Summary exported to Slack successfully!`);
            } catch (error) {
                showError('searchError', 'Failed to export to Slack: ' + error.message);
            }
        }

        // Export all summaries to Slack
        async function exportAllSummaries() {
            if (allSummaries.length === 0) {
                showError('searchError', 'No summaries to export');
                return;
            }

            try {
                // Simulate bulk Slack export - replace with actual webhook call
                await mockBulkSlackExport(allSummaries);
                showSuccess(`All ${allSummaries.length} summaries exported to Slack successfully!`);
            } catch (error) {
                showError('searchError', 'Failed to export to Slack: ' + error.message);
            }
        }

        // Mock Slack export - replace with actual webhook integration
        async function mockSlackExport(summary) {
            await new Promise(resolve => setTimeout(resolve, 1000));
            console.log('Exporting to Slack:', summary);
        }

        // Mock bulk Slack export - replace with actual webhook integration
        async function mockBulkSlackExport(summaries) {
            await new Promise(resolve => setTimeout(resolve, 1500));
            console.log('Bulk exporting to Slack:', summaries);
        }

        // Filter summaries
        function filterSummaries() {
            const searchTerm = document.getElementById('summarySearch').value.toLowerCase();
            const items = document.querySelectorAll('#summaryResults .summary-item');
            
            items.forEach(item => {
                const title = item.querySelector('.summary-title').textContent.toLowerCase();
                const content = item.querySelector('.summary-content').textContent.toLowerCase();
                const matches = title.includes(searchTerm) || content.includes(searchTerm);
                item.style.display = matches ? 'block' : 'none';
            });
        }

        // Filter feed
        function filterFeed() {
            const searchTerm = document.getElementById('feedSearch').value.toLowerCase();
            const items = document.querySelectorAll('#feedResults .summary-item');
            
            items.forEach(item => {
                const title = item.querySelector('.summary-title').textContent.toLowerCase();
                const content = item.querySelector('.summary-content').textContent.toLowerCase();
                const matches = title.includes(searchTerm) || content.includes(searchTerm);
                item.style.display = matches ? 'block' : 'none';
            });
        }

        // Utility functions
        function showLoading(elementId) {
            document.getElementById(elementId).style.display = 'block';
        }

        function hideLoading(elementId) {
            document.getElementById(elementId).style.display = 'none';
        }

        function showError(elementId, message) {
            const errorDiv = document.getElementById(elementId);
            errorDiv.textContent = message;
            errorDiv.classList.remove('hidden');
        }

        function hideError(elementId) {
            document.getElementById(elementId).classList.add('hidden');
        }

        function showSuccess(message) {
            // Create temporary success message
            const successDiv = document.createElement('div');
            successDiv.className = 'success';
            successDiv.textContent = message;
            document.querySelector('.main-content').insertBefore(successDiv, document.querySelector('.section'));
            
            setTimeout(() => {
                successDiv.remove();
            }, 3000);
        }

        function showSection(sectionId) {
            document.getElementById(sectionId).style.display = 'block';
        }

        // Initialize app
        document.addEventListener('DOMContentLoaded', function() {
            // Add enter key support for search
            document.getElementById('clientInput').addEventListener('keypress', function(e) {
                if (e.key === 'Enter') {
                    searchNews();
                }
            });
        });
    </script>
</body>
</html>
